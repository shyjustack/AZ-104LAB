const quizData = [
    {
        question: "You configure peering between MyVNetPrd and MyVNetDev. Once the peering is established, you try to route traffic from MyVNetPrd to an on-premises network that is connected to MyVNetDev through a VPN Gateway. However, the traffic is not being routed.\n\nWill enabling 'Use Remote Gateway' on the MyVNetPrd peering configuration resolve this issue?",
        options: ["Yes", "No"],
        answer: "Yes"
    },
    {
        question: "You are securing your virtual network in Azure. Which of the following practices would be effective for establishing secure communication paths within your virtual network and controlling inbound and outbound traffic?",
        options: [
            "Associate an NSG with the subnet.",
            "Implement Azure Bastion for every virtual machine in the network.",
            "Set up security rules in NSGs to define source, destination, and allowed traffic."
        ],
        answer: [
            "Associate an NSG with the subnet.",
            "Set up security rules in NSGs to define source, destination, and allowed traffic."
        ]
    }
];

const quiz = document.getElementById('quiz');
const nextBtn = document.getElementById('next');
const result = document.getElementById('result');

let currentQuestion = 0;

function loadQuestion() {
    const q = quizData[currentQuestion];
    const optionsHtml = q.options.map(opt => {
        const inputType = Array.isArray(q.answer) ? "checkbox" : "radio";
        return `<label>
                    <input type="${inputType}" name="option" value="${opt}"> ${opt}
                </label><br>`;
    }).join('');

    quiz.innerHTML = `<div class="question-block">
                        <p><strong>Q${currentQuestion + 1}:</strong> ${q.question}</p>
                        ${optionsHtml}
                       </div>`;
    result.innerHTML = "";

    nextBtn.innerText = currentQuestion === quizData.length - 1 ? "Submit" : "Next";
}

nextBtn.addEventListener('click', () => {
    const q = quizData[currentQuestion];
    const selected = Array.from(document.querySelectorAll('input[name="option"]:checked')).map(i => i.value);

    // Validation
    if (selected.length === 0) {
        alert("Please select at least one answer!");
        return;
    }

    // Check answer
    let isCorrect;
    if (Array.isArray(q.answer)) {
        isCorrect = q.answer.length === selected.length && q.answer.every(ans => selected.includes(ans));
    } else {
        isCorrect = selected[0] === q.answer;
    }

    if (isCorrect) {
        result.style.color = "green";
        result.innerText = "âœ… Correct!";
    } else {
        result.style.color = "red";
        result.innerText = "âŒ Wrong!";
    }

    // Move to next question after a short delay
    setTimeout(() => {
        result.innerText = "";
        currentQuestion++;
        if (currentQuestion < quizData.length) {
            loadQuestion();
        } else {
            quiz.innerHTML = "<h2>ðŸŽ‰ Quiz Completed!</h2>";
            nextBtn.style.display = "none";
        }
    }, 1000); // 1 second delay so user sees the feedback
});

// Load first question
loadQuestion();
